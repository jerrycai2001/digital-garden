---
import BaseLayout from '../../layouts/BaseLayout.astro';
import { getCollection } from 'astro:content';

// pull all entries, newest first
const logs = (await getCollection('work-log'))
  .filter((e) => !import.meta.env.PROD || !e.data.draft)
  .sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());
---

<BaseLayout title="Work Log">
  <h1>Work Log</h1>

  <ul>
    {logs.map((log) => (
      <li style="margin:.5rem 0;">
        <a href={`/work-log/${log.slug}/`}>
          {log.data.date.toLocaleDateString()} â€” {log.data.title}
        </a>
      </li>
    ))}
  </ul>
</BaseLayout>
